#!/bin/bash

set -e

case "$1" in
    remove|purge)
        echo "Removing HiFiBerry Web UI nginx configuration"
        # Remove the nginx configuration
        if [ -x /usr/sbin/configure-webui ]; then
            /usr/sbin/configure-webui remove || true
        else
            echo "Warning: configure-webui script not found, manual cleanup required"
            echo "Run 'sudo rm -f /etc/nginx/sites-enabled/hifiberry-webui' to manually remove"
        fi
        ;;
    
    upgrade|deconfigure)
        echo "Package upgrade or deconfigure - preserving nginx configuration"
        # Don't remove configuration during upgrades
        ;;
    
    failed-upgrade)
        # Nothing to do
        ;;
    
    *)
        echo "prerm called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

#DEBHELPER#

exit 0
