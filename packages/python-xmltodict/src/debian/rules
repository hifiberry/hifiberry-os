#!/usr/bin/make -f

export PYBUILD_NAME=xmltodict
export PYBUILD_DIR=xmltodict-source

%:
	dh $@ --with python3 --buildsystem=pybuild

override_dh_auto_clean:
	rm -rf xmltodict-source/
	rm -f *.tar.gz
	find . -name "*.pyc" -delete
	find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true

override_dh_auto_configure:
	# Download xmltodict source from PyPI
	if [ ! -d xmltodict-source ]; then \
		pip download xmltodict --no-binary :all: --no-deps --dest .; \
		tar -xzf xmltodict-*.tar.gz; \
		mv xmltodict-* xmltodict-source; \
	fi

override_dh_auto_build:
	dh_auto_build

override_dh_auto_install:
	dh_auto_install

override_dh_auto_test:
	# Skip tests - no test suite provided
